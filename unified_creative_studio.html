
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé® MEGA Creative Studio - Professional Design Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/fabric@5.3.0/dist/fabric.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/konva@9.0.0/konva.min.js"></script>
    <style>
        .creative-studio { 
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            min-height: 100vh;
        }
        .canvas-container { 
            position: relative; 
            background: #ffffff;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }
        .tool-panel { 
            background: rgba(15, 23, 42, 0.95); 
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        .voice-pulse { animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .layer-item { transition: all 0.2s ease; }
        .layer-item:hover { background: rgba(59, 130, 246, 0.1); }
    </style>
</head>
<body class="creative-studio text-white">
    <div x-data="creativeStudio()" class="h-screen flex">
        
        <!-- Left Toolbar -->
        <div class="w-16 bg-slate-900 border-r border-slate-700 flex flex-col items-center py-4 space-y-4">
            
            <!-- Voice Control -->
            <button @click="toggleVoiceControl()" 
                    :class="voiceActive ? 'bg-red-600 voice-pulse' : 'bg-slate-700 hover:bg-slate-600'"
                    class="w-12 h-12 rounded-lg flex items-center justify-center transition-all">
                <span class="text-xl">üé§</span>
            </button>
            
            <!-- Tools -->
            <div class="space-y-2">
                <button @click="setTool('select')" 
                        :class="currentTool === 'select' ? 'bg-blue-600' : 'bg-slate-700 hover:bg-slate-600'"
                        class="w-12 h-12 rounded-lg flex items-center justify-center transition-all">
                    <span class="text-lg">üîç</span>
                </button>
                
                <button @click="setTool('design')"
                        :class="currentTool === 'design' ? 'bg-purple-600' : 'bg-slate-700 hover:bg-slate-600'"
                        class="w-12 h-12 rounded-lg flex items-center justify-center transition-all">
                    <span class="text-lg">‚úèÔ∏è</span>
                </button>
                
                <button @click="setTool('image')"
                        :class="currentTool === 'image' ? 'bg-green-600' : 'bg-slate-700 hover:bg-slate-600'"
                        class="w-12 h-12 rounded-lg flex items-center justify-center transition-all">
                    <span class="text-lg">üñºÔ∏è</span>
                </button>
                
                <button @click="setTool('video')"
                        :class="currentTool === 'video' ? 'bg-red-600' : 'bg-slate-700 hover:bg-slate-600'"
                        class="w-12 h-12 rounded-lg flex items-center justify-center transition-all">
                    <span class="text-lg">üé¨</span>
                </button>
                
                <button @click="setTool('text')"
                        :class="currentTool === 'text' ? 'bg-yellow-600' : 'bg-slate-700 hover:bg-slate-600'"
                        class="w-12 h-12 rounded-lg flex items-center justify-center transition-all">
                    <span class="text-lg">üìù</span>
                </button>
            </div>
            
            <!-- Quick Actions -->
            <div class="flex-1"></div>
            <div class="space-y-2">
                <button @click="saveProject()" class="w-12 h-12 rounded-lg bg-green-600 hover:bg-green-700 flex items-center justify-center">
                    <span class="text-lg">üíæ</span>
                </button>
                <button @click="exportProject()" class="w-12 h-12 rounded-lg bg-blue-600 hover:bg-blue-700 flex items-center justify-center">
                    <span class="text-lg">üì§</span>
                </button>
            </div>
        </div>
        
        <!-- Main Canvas Area -->
        <div class="flex-1 flex flex-col">
            
            <!-- Top Menu Bar -->
            <div class="bg-slate-800 border-b border-slate-700 px-6 py-3 flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <h1 class="text-xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">
                        MEGA Creative Studio
                    </h1>
                    <span class="text-sm text-slate-400" x-text="'Tool: ' + currentTool.charAt(0).toUpperCase() + currentTool.slice(1)"></span>
                </div>
                
                <div class="flex items-center space-x-3">
                    <div class="flex items-center space-x-2">
                        <span class="text-sm text-slate-400">Zoom:</span>
                        <button @click="zoomOut()" class="bg-slate-700 hover:bg-slate-600 px-2 py-1 rounded text-sm">-</button>
                        <span class="text-sm" x-text="Math.round(zoomLevel * 100) + '%'"></span>
                        <button @click="zoomIn()" class="bg-slate-700 hover:bg-slate-600 px-2 py-1 rounded text-sm">+</button>
                    </div>
                    
                    <button @click="undoAction()" class="bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded text-sm">
                        ‚Ü∂ Undo
                    </button>
                    <button @click="redoAction()" class="bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded text-sm">
                        ‚Ü∑ Redo
                    </button>
                </div>
            </div>
            
            <!-- Canvas Workspace -->
            <div class="flex-1 p-6 overflow-hidden">
                <div class="h-full flex space-x-6">
                    
                    <!-- Main Canvas -->
                    <div class="flex-1 flex items-center justify-center">
                        <div class="canvas-container" :style="'transform: scale(' + zoomLevel + ')'">
                            
                            <!-- Canvas Header -->
                            <div class="bg-gray-100 px-4 py-2 border-b flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <span class="font-semibold text-gray-700" x-text="canvasTitle"></span>
                                    <span class="text-sm text-gray-500" x-text="canvasDimensions"></span>
                                </div>
                                
                                <div class="flex space-x-2">
                                    <button @click="toggleGrid()" 
                                            :class="showGrid ? 'bg-blue-600 text-white' : 'bg-gray-300 text-gray-700'"
                                            class="text-xs px-2 py-1 rounded">
                                        üèÅ Grid
                                    </button>
                                    <button @click="toggleRulers()" 
                                            :class="showRulers ? 'bg-blue-600 text-white' : 'bg-gray-300 text-gray-700'"
                                            class="text-xs px-2 py-1 rounded">
                                        üìè Rulers
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Actual Canvas -->
                            <div class="relative bg-white" style="width: 800px; height: 600px;">
                                <canvas id="main-canvas" width="800" height="600" 
                                        class="absolute inset-0 cursor-crosshair"
                                        @mousedown="startDrawing($event)"
                                        @mousemove="draw($event)"
                                        @mouseup="stopDrawing()"
                                        @drop="handleDrop($event)"
                                        @dragover="handleDragOver($event)">
                                </canvas>
                                
                                <!-- Grid Overlay -->
                                <div x-show="showGrid" class="absolute inset-0 pointer-events-none opacity-20"
                                     style="background-image: linear-gradient(#ddd 1px, transparent 1px), linear-gradient(90deg, #ddd 1px, transparent 1px); background-size: 20px 20px;">
                                </div>
                                
                                <!-- Video Preview Overlay -->
                                <div x-show="currentTool === 'video'" class="absolute inset-0 bg-black bg-opacity-80 flex items-center justify-center">
                                    <div class="text-center text-white">
                                        <div class="text-6xl mb-4">üé•</div>
                                        <p class="text-xl mb-4">AI Video Editor</p>
                                        <button @click="startVideoRecording()" class="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-lg font-semibold">
                                            üî¥ Start Recording
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Canvas Status Bar -->
                            <div class="bg-gray-50 px-4 py-2 border-t text-xs text-gray-600 flex items-center justify-between">
                                <div class="flex items-center space-x-4">
                                    <span>Layers: <span x-text="layers.length"></span></span>
                                    <span>Objects: <span x-text="canvasObjects.length"></span></span>
                                    <span x-show="currentTool === 'image'">AI Enhancement: Ready</span>
                                </div>
                                
                                <div class="flex items-center space-x-2">
                                    <span x-show="voiceActive" class="text-red-600">üé§ Voice Active</span>
                                    <span>Auto-save: <span class="text-green-600">On</span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Properties Panel -->
                    <div class="w-80 space-y-6">
                        
                        <!-- Voice Commands Panel -->
                        <div class="tool-panel rounded-lg p-4" x-show="voiceActive">
                            <h3 class="font-bold mb-3 text-purple-400">üé§ Voice Commands</h3>
                            <div class="space-y-2 text-sm">
                                <div class="bg-slate-700 rounded p-2">
                                    "Create a logo design"
                                </div>
                                <div class="bg-slate-700 rounded p-2">
                                    "Add text saying 'Welcome'"
                                </div>
                                <div class="bg-slate-700 rounded p-2">
                                    "Make background blue"
                                </div>
                                <div class="bg-slate-700 rounded p-2">
                                    "Export as PNG"
                                </div>
                            </div>
                        </div>
                        
                        <!-- AI Creative Assistant -->
                        <div class="tool-panel rounded-lg p-4">
                            <h3 class="font-bold mb-3 text-blue-400">‚ú® AI Assistant</h3>
                            <div class="space-y-3">
                                <textarea x-model="aiPrompt" 
                                          placeholder="Describe what you want to create..."
                                          class="w-full h-20 bg-slate-700 border border-slate-600 rounded p-2 text-sm resize-none"></textarea>
                                
                                <button @click="generateWithAI()" 
                                        class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 py-2 rounded font-semibold">
                                    üöÄ Create with AI
                                </button>
                                
                                <div x-show="aiSuggestions.length > 0" class="space-y-2">
                                    <h4 class="text-sm font-semibold text-slate-300">AI Suggestions:</h4>
                                    <template x-for="suggestion in aiSuggestions" :key="suggestion.id">
                                        <div @click="applySuggestion(suggestion)" 
                                             class="bg-slate-700 hover:bg-slate-600 p-2 rounded cursor-pointer text-sm">
                                            <span x-text="suggestion.text"></span>
                                        </div>
                                    </template>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tool Properties -->
                        <div class="tool-panel rounded-lg p-4">
                            <h3 class="font-bold mb-3 text-green-400" x-text="currentTool.charAt(0).toUpperCase() + currentTool.slice(1) + ' Tools'"></h3>
                            
                            <!-- Design Tool Properties -->
                            <div x-show="currentTool === 'design'" class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium mb-1">Shape</label>
                                    <select x-model="designShape" class="w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm">
                                        <option value="rectangle">Rectangle</option>
                                        <option value="circle">Circle</option>
                                        <option value="triangle">Triangle</option>
                                        <option value="polygon">Polygon</option>
                                    </select>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-2">
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Fill Color</label>
                                        <input x-model="fillColor" type="color" class="w-full h-10 rounded border border-slate-600">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Border</label>
                                        <input x-model="borderColor" type="color" class="w-full h-10 rounded border border-slate-600">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Image Tool Properties -->
                            <div x-show="currentTool === 'image'" class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium mb-2">Upload Image</label>
                                    <input type="file" @change="uploadImage" accept="image/*" 
                                           class="w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm">
                                </div>
                                
                                <div class="space-y-2">
                                    <label class="block text-sm font-medium">AI Enhancements</label>
                                    <button @click="enhanceImage('brightness')" class="w-full bg-yellow-600 hover:bg-yellow-700 py-1 rounded text-sm">
                                        ‚òÄÔ∏è Brighten
                                    </button>
                                    <button @click="enhanceImage('contrast')" class="w-full bg-purple-600 hover:bg-purple-700 py-1 rounded text-sm">
                                        üé® Enhance Contrast
                                    </button>
                                    <button @click="enhanceImage('sharpen')" class="w-full bg-blue-600 hover:bg-blue-700 py-1 rounded text-sm">
                                        üîç Sharpen
                                    </button>
                                    <button @click="removeBackground()" class="w-full bg-red-600 hover:bg-red-700 py-1 rounded text-sm">
                                        ‚úÇÔ∏è Remove Background
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Video Tool Properties -->
                            <div x-show="currentTool === 'video'" class="space-y-3">
                                <div class="bg-slate-700 rounded p-3">
                                    <h4 class="font-semibold mb-2">Video Timeline</h4>
                                    <div class="bg-slate-600 h-16 rounded flex items-center justify-center">
                                        <span class="text-xs text-slate-400">Timeline will appear here</span>
                                    </div>
                                </div>
                                
                                <div class="space-y-2">
                                    <button @click="addVideoEffect('transition')" class="w-full bg-purple-600 hover:bg-purple-700 py-1 rounded text-sm">
                                        üé≠ Add Transition
                                    </button>
                                    <button @click="addVideoEffect('text')" class="w-full bg-blue-600 hover:bg-blue-700 py-1 rounded text-sm">
                                        üìù Add Text Overlay
                                    </button>
                                    <button @click="addVideoEffect('music')" class="w-full bg-green-600 hover:bg-green-700 py-1 rounded text-sm">
                                        üéµ Add Background Music
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Text Tool Properties -->
                            <div x-show="currentTool === 'text'" class="space-y-3">
                                <div>
                                    <label class="block text-sm font-medium mb-1">Text Content</label>
                                    <textarea x-model="textContent" 
                                              placeholder="Enter your text..."
                                              class="w-full h-16 bg-slate-700 border border-slate-600 rounded p-2 text-sm resize-none"></textarea>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-2">
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Font Size</label>
                                        <input x-model="fontSize" type="range" min="8" max="72" 
                                               class="w-full">
                                        <span class="text-xs text-slate-400" x-text="fontSize + 'px'"></span>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Color</label>
                                        <input x-model="textColor" type="color" class="w-full h-8 rounded border border-slate-600">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium mb-1">Font Family</label>
                                    <select x-model="fontFamily" class="w-full bg-slate-700 border border-slate-600 rounded p-2 text-sm">
                                        <option value="Arial">Arial</option>
                                        <option value="Helvetica">Helvetica</option>
                                        <option value="Times New Roman">Times New Roman</option>
                                        <option value="Georgia">Georgia</option>
                                        <option value="Verdana">Verdana</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Layers Panel -->
                        <div class="tool-panel rounded-lg p-4">
                            <h3 class="font-bold mb-3 text-yellow-400">üìö Layers</h3>
                            <div class="space-y-1">
                                <template x-for="layer in layers" :key="layer.id">
                                    <div @click="selectLayer(layer)" 
                                         :class="layer.selected ? 'bg-blue-600' : 'bg-slate-700 hover:bg-slate-600'"
                                         class="layer-item flex items-center justify-between p-2 rounded cursor-pointer">
                                        <div class="flex items-center space-x-2">
                                            <span x-text="layer.type === 'text' ? 'üìù' : layer.type === 'image' ? 'üñºÔ∏è' : 'üé®'"></span>
                                            <span class="text-sm" x-text="layer.name"></span>
                                        </div>
                                        
                                        <div class="flex items-center space-x-1">
                                            <button @click="toggleLayerVisibility(layer)" 
                                                    :class="layer.visible ? 'text-green-400' : 'text-gray-400'"
                                                    class="hover:text-white">
                                                üëÅ
                                            </button>
                                            <button @click="deleteLayer(layer)" class="text-red-400 hover:text-red-300">
                                                üóëÔ∏è
                                            </button>
                                        </div>
                                    </div>
                                </template>
                                
                                <button @click="addNewLayer()" 
                                        class="w-full bg-slate-600 hover:bg-slate-500 py-2 rounded text-sm mt-2">
                                    ‚ûï Add Layer
                                </button>
                            </div>
                        </div>
                        
                        <!-- Templates -->
                        <div class="tool-panel rounded-lg p-4">
                            <h3 class="font-bold mb-3 text-pink-400">üìã Smart Templates</h3>
                            <div class="grid grid-cols-2 gap-2">
                                <template x-for="template in smartTemplates" :key="template.id">
                                    <div @click="loadTemplate(template)" 
                                         class="bg-slate-700 hover:bg-slate-600 p-3 rounded cursor-pointer text-center transition-colors">
                                        <div class="text-2xl mb-1" x-text="template.icon"></div>
                                        <div class="text-xs" x-text="template.name"></div>
                                    </div>
                                </template>
                            </div>
                        </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function creativeStudio() {
            return {
                // Core State
                currentTool: 'select',
                voiceActive: false,
                zoomLevel: 1,
                
                // Canvas Properties
                canvasTitle: 'Untitled Design',
                canvasDimensions: '800 x 600px',
                showGrid: false,
                showRulers: false,
                
                // AI Assistant
                aiPrompt: '',
                aiSuggestions: [
                    { id: 1, text: 'Add a gradient background' },
                    { id: 2, text: 'Create a professional logo' },
                    { id: 3, text: 'Design social media post' }
                ],
                
                // Tool Properties
                designShape: 'rectangle',
                fillColor: '#3B82F6',
                borderColor: '#1E40AF',
                textContent: '',
                fontSize: 24,
                textColor: '#000000',
                fontFamily: 'Arial',
                
                // Layers
                layers: [
                    { id: 1, name: 'Background', type: 'background', visible: true, selected: true },
                    { id: 2, name: 'Layer 1', type: 'design', visible: true, selected: false }
                ],
                
                // Canvas Objects
                canvasObjects: [],
                
                // Smart Templates
                smartTemplates: [
                    { id: 1, name: 'Logo', icon: 'üé≠' },
                    { id: 2, name: 'Social', icon: 'üì±' },
                    { id: 3, name: 'Card', icon: 'üíº' },
                    { id: 4, name: 'Flyer', icon: 'üìÑ' },
                    { id: 5, name: 'Banner', icon: 'üè≥Ô∏è' },
                    { id: 6, name: 'Poster', icon: 'üñºÔ∏è' }
                ],
                
                // Drawing State
                isDrawing: false,
                canvas: null,
                ctx: null,
                
                init() {
                    this.initCanvas();
                    this.initVoiceRecognition();
                    console.log('Creative Studio initialized');
                },
                
                initCanvas() {
                    this.canvas = document.getElementById('main-canvas');
                    this.ctx = this.canvas.getContext('2d');
                    
                    // Set initial canvas background
                    this.ctx.fillStyle = '#ffffff';
                    this.ctx.fillRect(0, 0, 800, 600);
                },
                
                initVoiceRecognition() {
                    if ('webkitSpeechRecognition' in window) {
                        const recognition = new webkitSpeechRecognition();
                        recognition.continuous = true;
                        recognition.interimResults = false;
                        
                        recognition.onresult = (event) => {
                            const command = event.results[event.results.length - 1][0].transcript.toLowerCase();
                            this.processVoiceCommand(command);
                        };
                        
                        this.$watch('voiceActive', (active) => {
                            if (active) {
                                recognition.start();
                            } else {
                                recognition.stop();
                            }
                        });
                    }
                },
                
                processVoiceCommand(command) {
                    console.log('Voice command:', command);
                    
                    if (command.includes('create logo')) {
                        this.setTool('design');
                        this.designShape = 'circle';
                        this.addShape();
                    } else if (command.includes('add text')) {
                        this.setTool('text');
                        const textMatch = command.match(/saying ['"](.*?)['"]/);
                        if (textMatch) {
                            this.textContent = textMatch[1];
                        }
                        this.addText();
                    } else if (command.includes('background') && command.includes('blue')) {
                        this.changeBackground('#3B82F6');
                    } else if (command.includes('export') || command.includes('download')) {
                        this.exportProject();
                    }
                },
                
                setTool(tool) {
                    this.currentTool = tool;
                    console.log('Tool changed to:', tool);
                },
                
                toggleVoiceControl() {
                    this.voiceActive = !this.voiceActive;
                    console.log('Voice control:', this.voiceActive ? 'activated' : 'deactivated');
                },
                
                toggleGrid() {
                    this.showGrid = !this.showGrid;
                },
                
                toggleRulers() {
                    this.showRulers = !this.showRulers;
                },
                
                zoomIn() {
                    this.zoomLevel = Math.min(this.zoomLevel + 0.1, 3);
                },
                
                zoomOut() {
                    this.zoomLevel = Math.max(this.zoomLevel - 0.1, 0.1);
                },
                
                startDrawing(event) {
                    if (this.currentTool === 'select') return;
                    
                    this.isDrawing = true;
                    const rect = this.canvas.getBoundingClientRect();
                    const x = event.clientX - rect.left;
                    const y = event.clientY - rect.top;
                    
                    if (this.currentTool === 'design') {
                        this.startShape(x, y);
                    } else if (this.currentTool === 'text') {
                        this.placeText(x, y);
                    }
                },
                
                draw(event) {
                    if (!this.isDrawing) return;
                    // Drawing logic here
                },
                
                stopDrawing() {
                    this.isDrawing = false;
                },
                
                startShape(x, y) {
                    this.ctx.beginPath();
                    this.ctx.fillStyle = this.fillColor;
                    this.ctx.strokeStyle = this.borderColor;
                    
                    if (this.designShape === 'rectangle') {
                        this.ctx.fillRect(x - 50, y - 30, 100, 60);
                        this.ctx.strokeRect(x - 50, y - 30, 100, 60);
                    } else if (this.designShape === 'circle') {
                        this.ctx.arc(x, y, 40, 0, 2 * Math.PI);
                        this.ctx.fill();
                        this.ctx.stroke();
                    }
                    
                    this.addCanvasObject('shape', { x, y, shape: this.designShape });
                },
                
                placeText(x, y) {
                    if (!this.textContent) return;
                    
                    this.ctx.font = `${this.fontSize}px ${this.fontFamily}`;
                    this.ctx.fillStyle = this.textColor;
                    this.ctx.fillText(this.textContent, x, y);
                    
                    this.addCanvasObject('text', { x, y, text: this.textContent });
                },
                
                addCanvasObject(type, data) {
                    const obj = {
                        id: Date.now(),
                        type: type,
                        data: data
                    };
                    this.canvasObjects.push(obj);
                    
                    // Add to layers
                    this.layers.push({
                        id: obj.id,
                        name: type.charAt(0).toUpperCase() + type.slice(1) + ' ' + this.layers.length,
                        type: type,
                        visible: true,
                        selected: false
                    });
                },
                
                generateWithAI() {
                    if (!this.aiPrompt) return;
                    
                    console.log('Generating with AI:', this.aiPrompt);
                    
                    // Simulate AI generation
                    setTimeout(() => {
                        if (this.aiPrompt.includes('logo')) {
                            this.setTool('design');
                            this.designShape = 'circle';
                            this.fillColor = '#8B5CF6';
                            this.addShape(400, 300);
                        } else if (this.aiPrompt.includes('text')) {
                            this.setTool('text');
                            this.textContent = 'AI Generated Text';
                            this.placeText(400, 300);
                        }
                        
                        this.aiPrompt = '';
                    }, 1000);
                },
                
                applySuggestion(suggestion) {
                    console.log('Applying AI suggestion:', suggestion.text);
                    
                    if (suggestion.text.includes('gradient')) {
                        this.changeBackgroundGradient();
                    } else if (suggestion.text.includes('logo')) {
                        this.loadTemplate({ name: 'Logo', type: 'logo' });
                    }
                },
                
                uploadImage(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = (e) => {
                            const img = new Image();
                            img.onload = () => {
                                this.ctx.drawImage(img, 100, 100, 200, 150);
                                this.addCanvasObject('image', { x: 100, y: 100, width: 200, height: 150 });
                            };
                            img.src = e.target.result;
                        };
                        reader.readAsDataURL(file);
                    }
                },
                
                enhanceImage(type) {
                    console.log('Enhancing image with:', type);
                    // AI image enhancement logic here
                },
                
                removeBackground() {
                    console.log('Removing background with AI');
                    // AI background removal logic here
                },
                
                addVideoEffect(effect) {
                    console.log('Adding video effect:', effect);
                    // Video effect logic here
                },
                
                startVideoRecording() {
                    console.log('Starting video recording');
                    // Video recording logic here
                },
                
                selectLayer(layer) {
                    this.layers.forEach(l => l.selected = false);
                    layer.selected = true;
                },
                
                toggleLayerVisibility(layer) {
                    layer.visible = !layer.visible;
                },
                
                deleteLayer(layer) {
                    const index = this.layers.findIndex(l => l.id === layer.id);
                    if (index > -1) {
                        this.layers.splice(index, 1);
                    }
                },
                
                addNewLayer() {
                    const newLayer = {
                        id: Date.now(),
                        name: `Layer ${this.layers.length + 1}`,
                        type: 'design',
                        visible: true,
                        selected: false
                    };
                    this.layers.push(newLayer);
                },
                
                loadTemplate(template) {
                    console.log('Loading template:', template.name);
                    this.canvasTitle = template.name + ' Design';
                    
                    // Clear canvas
                    this.ctx.clearRect(0, 0, 800, 600);
                    this.ctx.fillStyle = '#ffffff';
                    this.ctx.fillRect(0, 0, 800, 600);
                    
                    // Load template-specific content
                    if (template.name === 'Logo') {
                        this.ctx.fillStyle = '#8B5CF6';
                        this.ctx.beginPath();
                        this.ctx.arc(400, 300, 80, 0, 2 * Math.PI);
                        this.ctx.fill();
                        
                        this.ctx.font = '24px Arial';
                        this.ctx.fillStyle = '#ffffff';
                        this.ctx.textAlign = 'center';
                        this.ctx.fillText('LOGO', 400, 310);
                    }
                },
                
                changeBackground(color) {
                    this.ctx.fillStyle = color;
                    this.ctx.fillRect(0, 0, 800, 600);
                },
                
                changeBackgroundGradient() {
                    const gradient = this.ctx.createLinearGradient(0, 0, 800, 600);
                    gradient.addColorStop(0, '#8B5CF6');
                    gradient.addColorStop(1, '#3B82F6');
                    
                    this.ctx.fillStyle = gradient;
                    this.ctx.fillRect(0, 0, 800, 600);
                },
                
                handleDrop(event) {
                    event.preventDefault();
                    console.log('File dropped on canvas');
                },
                
                handleDragOver(event) {
                    event.preventDefault();
                },
                
                undoAction() {
                    console.log('Undo action');
                },
                
                redoAction() {
                    console.log('Redo action');
                },
                
                saveProject() {
                    console.log('Saving project:', this.canvasTitle);
                    const imageData = this.canvas.toDataURL();
                    localStorage.setItem(`project_${Date.now()}`, JSON.stringify({
                        title: this.canvasTitle,
                        imageData: imageData,
                        layers: this.layers,
                        objects: this.canvasObjects
                    }));
                },
                
                exportProject() {
                    const link = document.createElement('a');
                    link.download = this.canvasTitle.replace(/\s+/g, '_') + '.png';
                    link.href = this.canvas.toDataURL();
                    link.click();
                    console.log('Project exported');
                }
            }
        }
    </script>
</body>
</html>
        